{
  "id": "org.freedesktop.LinuxAudio.Lv2Plugins.InvadaStudio",
  "runtime": "org.freedesktop.LinuxAudio.BaseExtension//19.08",
  "sdk": "org.freedesktop.Sdk//19.08",
  "build-extension": true,
  "appstream-compose": false,
  "build-options": {
    "prefix": "/app/extensions/Lv2Plugins/InvadaStudio",
    "prepend-path": "/app/extensions/Lv2Plugins/InvadaStudio/bin",
    "prepend-pkg-config-path": "/app/extensions/Lv2Plugins/InvadaStudio/lib/pkgconfig",
    "prepend-ld-library-path": "/app/extensions/Lv2Plugins/InvadaStudio/lib"
  },
  "cleanup": [
    "/lib/lv2"
  ],
  "modules": [
    "shared-modules/gtk2/gtk2.json",
    "shared-modules/linux-audio/lv2.json",
    {
      "name": "invada-studio-plugins-lv2",
      "buildsystem": "simple",
      "build-commands": [
        "sed -i -e 's~/usr/local/lib/lv2~/app/extensions/Lv2Plugins/InvadaStudio/lv2~g' Makefile",
        "make CFLAGS=\"-I$FLATPAK_DEST/include `pkg-config --cflags gtk+-2.0` -fPIC\"",
        "make install-sys"
      ],
      "cleanup": [
        "*.la",
        "*.a"
      ],
      "post-install": [
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo org.freedesktop.LinuxAudio.Lv2Plugins.InvadaStudio.metainfo.xml",
        "appstream-compose --basename=org.freedesktop.LinuxAudio.Lv2Plugins.InvadaStudio --prefix=${FLATPAK_DEST} --origin=flatpak org.freedesktop.LinuxAudio.Lv2Plugins.InvadaStudio",
        "install -Dm644 -t $FLATPAK_DEST/share/licenses/invada-studio-plugins-lv2/ COPYING"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://launchpad.net/invada-studio/lv2/1.2/+download/invada-studio-plugins-lv2_1.2.0-0.tar.gz",
          "sha256": "9e67af0ebc8a6394b50785034b368573c8a9241dd2500bdc91905977b94f8209"
        },
        {
          "type": "file",
          "path": "org.freedesktop.LinuxAudio.Lv2Plugins.InvadaStudio.metainfo.xml"
        }
      ]
    }
  ]
}
